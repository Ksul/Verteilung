<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test Verteilung</title>

    <script src="resources/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/ace/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/ace/theme-eclipse.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/ace/mode-xml.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
    <script src="resources/js/ace/mode-text.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" src="resources/js/alfrescoClient.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/dialoge.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/util.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/recognition.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/verteilung.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery-1.12.1.min.js"></script>
    <script type="text/javascript" src="resources/js/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.layout.js"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.layout.resizeTabLayout-1.3.js"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.cookie.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.hotkeys.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jstree/jstree.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.themeswitcher.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.dataTables.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/dataTables/dataTables.paging_with_jqui_icons.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/moment/moment-with-locales.js"></script>
    <script type="text/javascript" src="resources/js/bootstrap/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript" src="resources/js/dataTables/datetime-moment.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.jeditable.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/dataTables/dataTables.rowShow.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/dataTables/dataTables.select.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.DataTables.editable.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.jeditable.datepicker.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.price-format.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.easing.1.3.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.jBreadCrumb.1.1.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.formatDateTime.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jquery/jquery.wysiwyg.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/superfish.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/hoverIntent.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/alpaca/handlebars.js"></script>
    <script type="text/javascript" src="resources/js/alpaca/alpaca.js"></script>
    <script type="text/javascript" src="resources/js/vkbeautify.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/jsbeautify.js" charset="utf-8"></script>
    <script type="text/javascript" src="resources/js/Base64.js" charset="utf-8"></script>


    <link type="text/css" href="resources/css/bootstrap-datetimepicker.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/dataTables.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/Base.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/BreadCrumb.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/select.jqueryui.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/superfish.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/superfish-navbar.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/superfish-vertical.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/jquery.wysiwyg.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/alpaca.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/style.css" rel="stylesheet"/>
    <link type="text/css" href="resources/css/ArchivLayout.css" rel="stylesheet"/>


    <script type="text/javascript" charset="utf-8">

        function toggleLiveResizing() {
            $.each($.layout.config.borderPanes, function (i, pane) {
                var o = verteilungLayout.options[pane];
                o.livePaneResizing = !o.livePaneResizing;
            });
        }


        function toggleStateManagement(skipAlert, mode) {
            if (!$.layout.plugins.stateManagement) return;

            var options = verteilungLayout.options.stateManagement
                    , enabled = options.enabled // current setting
                    ;
            if ($.type(mode) === "boolean") {
                if (enabled === mode) return; // already correct
                enabled = options.enabled = mode
            }
            else
                enabled = options.enabled = !enabled; // toggle option

            if (!enabled) { // if disabling state management...
                verteilungLayout.deleteCookie(); // ...clear cookie so will NOT be found on next refresh
                if (!skipAlert)
                    alert('This layout will reload as the options specify \nwhen the page is refreshed.');
            }
            else if (!skipAlert)
                alert("This layout will save and restore its last state \nwhen the page is refreshed.");
        }


        $(document).ready(function () {


            $(document).tooltip();
            $('.ui-dialog-titlebar-close').tooltip('disable');
            $("#switcher").themeswitcher();
            jQuery("#breadcrumb").jBreadCrumb();

        });


        $.fn.dataTableExt.oPagination.listbox = {

            "fnInit": function (oSettings, nPaging, fnCallbackDraw) {
                var nInput = document.createElement('select');
                var nPage = document.createElement('span');
                var nOf = document.createElement('span');
                nOf.className = "paginate_of";
                nPage.className = "paginate_page";
                if (oSettings.sTableId !== '') {
                    nPaging.setAttribute('id', oSettings.sTableId + '_paginate');
                }
                nInput.style.display = "inline";
                nPage.innerHTML = "Seite ";
                nPaging.appendChild(nPage);
                nPaging.appendChild(nInput);
                nPaging.appendChild(nOf);
                $(nInput).change(function (e) { // Set DataTables page property and redraw the grid on listbox change event.
                    window.scroll(0, 0); //scroll to top of page
                    if (this.value === "" || this.value.match(/[^0-9]/)) {
                        return;
                    }
                    var iNewStart = oSettings._iDisplayLength * (this.value - 1);
                    if (iNewStart > oSettings.fnRecordsDisplay()) {
                        oSettings._iDisplayStart = (Math.ceil((oSettings.fnRecordsDisplay() - 1) / oSettings._iDisplayLength) - 1) * oSettings._iDisplayLength;
                        fnCallbackDraw(oSettings);
                        return;
                    }
                    oSettings._iDisplayStart = iNewStart;
                    fnCallbackDraw(oSettings);
                }); // Take the brutal approach to cancelling text selection
                $('span', nPaging).bind('mousedown', function () {
                    return false;
                });
                $('span', nPaging).bind('selectstart', function () {
                    return false;
                });
            },


            "fnUpdate": function (oSettings, fnCallbackDraw) {
                if (!oSettings.aanFeatures.p) {
                    return;
                }
                var iPages = Math.ceil((oSettings.fnRecordsDisplay()) / oSettings._iDisplayLength);
                var iCurrentPage = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength) + 1; // Loop over each instance of the pager
                var an = oSettings.aanFeatures.p;
                for (var i = 0, iLen = an.length; i < iLen; i++) {
                    var spans = an[i].getElementsByTagName('span');
                    var inputs = an[i].getElementsByTagName('select');
                    var elSel = inputs[0];
                    if (elSel.options.length != iPages) {
                        elSel.options.length = 0; //clear the listbox contents
                        for (var j = 0; j < iPages; j++) { //add the pages
                            var oOption = document.createElement('option');
                            oOption.text = j + 1;
                            oOption.value = j + 1;
                            try {
                                elSel.add(oOption, null); // standards compliant; doesn't work in IE
                            } catch (ex) {
                                elSel.add(oOption); // IE only
                            }
                        }
                        spans[1].innerHTML = " &nbsp;von &nbsp;" + iPages;
                    }
                    elSel.value = iCurrentPage;
                }
            }
        };

        window.onload = function () {
            start();
        };

        var rulesEditor;
        var textEditor;
        var propsEditor;
        var outputEditor;
        var alfrescoMode = false;
        var scriptID = null;
        var rulesID = null;
        var inboxFolderId;
        var documentFolderId;
        var scriptFolderId;
        var archivFolderId;
        var fehlerFolderId;
        var unknownFolderId;
        var doubleFolderId;
        var alfrescoRootFolderId;
        var currentRules = null;
        var scriptMode = false;
        var testMode = false;
        var runLocal = false;
        var REC;
        var tabelle;
        var alfrescoTabelle;
        var alfrescoFolderTabelle;
        var alfrescoSearchTabelle;
        var viewMenu;
        var viewMode = 0;
        var workDocument = null;
        var multiMode = false;
        var currentPDF = false;
        var showMulti = false;
        var currentFile = null;
        var currentContent = false;
        var currentText = false;
        var currentContainer = null;
        var jsMode;
        var txtMode;
        var panelSizeReminder;
        var settings;
        var alfrescoServerAvailable = false;
        var alfrescoLayout;
        var searchLayout;
        var verteilungLayout;
        var tabLayout;
        var globalLayout;
        var alfrescoTicket;
        var anOpen = [];
    </script>

</head>

<body>

<!--Seite-->
<div id="clientPage" class="ui-state-active">
    <!--Tab Bereich-->
    <div id="tabs" class="container">
        <!--Tabulatoren-->
        <ul id="tabButtons" class="container">
            <li id="tabArchiv" ><a href="#tab1">Archiv</a></li>
            <li id="tabSuche" ><a href="#tab2">Suche</a></li>
            <li id="tabVerteilung"><a  href="#tab3">Verteilung</a></li>
            <input  style="float:right" onclick="startSettingsDialog();"
                    name="settings" id="settings" type="submit" class="settings"
                    title="Open Settings" value=""/>
        </ul>
        <!--Tab Panels-->
        <div id="tabPanels" class="container ui-state-active">
            <!--Tab Archiv-->
            <div id="tab1" class="tabPanel ui-widget-content hidden">
                <div id="alfrescoWest" class="ui-tab-layout-west container  hidden">
                    <div id="alfrescoHeaderWest" class="header  ui-widget-header">Archiv</div>
                    <div class="ui-widget-content">
                        <div id="tree"></div>
                    </div>
                </div>
                <div id="alfrescoCenter" class="ui-tab-layout-center container hidden">
                    <div id="alfrescoCenterCenter" class="inner-center container hidden">
                        <div id="alfrescoCenterCenterNorth" class="inner-center container hidden">
                            <div class="header ui-widget-header" id="alfrescoFolderTabelleHeader">Ordner</div>
                            <div class="ui-widget-content">
                                <div id="dtable3">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display"
                                           id="alfrescoFolderTabelle"></table>
                                </div>
                                <div class="header ui-widget-header" id="alfrescoFolderTableFooter"></div>
                            </div>
                        </div>
                        <div id="alfrescoCenterCenterCenter" class="inner-center container  hidden">
                            <div class="header ui-widget-header" id="alfrescoTabelleHeader">Dokumente</div>
                            <div >
                                <div id="dtable2">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display"
                                           id="alfrescoTabelle"></table>
                                </div>
                                <div class="header  ui-widget-header" id="alfrescoTableFooter"></div>
                            </div>
                        </div>
                    </div>
                    <div id="alfrescoCenterNorth" onmouseover="alfrescoLayout.allowOverflow(this);"
                         class="inner-center container ui-widget-header hidden">
                        <div id="alfrescoCenterNorthCenter"
                             class="inner-center container ui-widget-header hidden">
                            <div class="breadCrumbHolder module">
                                <div id="breadcrumb" class="breadCrumb module">
                                </div>
                            </div>
                        </div>
                        <div id="alfrescoCenterNorthEast"
                             class="inner-center container ui-widget-header hidden">
                            <ul id="menu-1" class="sf-menu" onmouseover="alfrescoLayout.allowOverflow(this);">
                                <li class="current">
                                    <a href="#ansicht">Ansicht</a>
                                    <ul>
                                        <li>
                                            <a href="#normal" onclick="showAlfrescoNormalView();">Normal</a>
                                        </li>
                                        <li>
                                            <a href="#icons" onclick="showAlfrescoIconView();">Icons</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--Tab Suche-->
            <div id="tab2" class="tabPanel ui-widget-content hidden">
                <div id="searchNorth" class="ui-tab-layout-north container hidden">
                    <div class="header  ui-widget-header">Suchen</div>
                    <div>
                        <label for="alfrescoSearch" style="float:left;margin: 20px 5px 5px 5px;">Suche </label>
                        <input id="alfrescoSearch" style="width:400px;height:auto;float:left;margin: 20px 5px 5px 5px;"
                               class="ui-autocomplete-input" autocomplete="off"/>
                        <div id="alfrescoSearchButton" onclick="startSearch($('#alfrescoSearch').val());"
                             style="margin: 18px 5px 5px 5px;">Suche
                        </div>
                    </div>
                </div>
                <div id="searchCenter" class="ui-tab-layout-center container hidden">
                    <div class="header  ui-widget-header">Ergebnisse
                        <ul id="menu-2" style="float: right;" class="sf-menu"
                            onmouseover="searchLayout.allowOverflow(this);">
                            <li class="current">
                                <a href="#ansicht">Ansicht</a>
                                <ul>
                                    <li>
                                        <a href="#normal" onclick="showAlfrescoSearchNormalView();">Normal</a>
                                    </li>
                                    <li>
                                        <a href="#icons" onclick="showAlfrescoSearchIconView();">Icons</a>
                                    </li>
                                </ul>
                        </ul>
                    </div>
                    <div>
                        <div class="ui-widget-content">
                            <div id="dtable4">
                                <table cellpadding="0" cellspacing="0" border="0" class="display"
                                       id="alfrescoSearchTabelle"></table>
                            </div>
                            <div class="header ui-widget-header" id="alfrescoSearchTableFooter"></div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Tab Verteilung-->
            <div id="tab3" class="tabPanel ui-widget-content hidden">
                <!--Buttons-->
                <div id="verteilungNorth" class="ui-layout-north container ui-widget-content"
                     onmouseover="if (exist(verteilungLayout)) verteilungLayout.allowOverflow(this); if (exist(alfrescoLayout)) alfrescoLayout.allowOverflow(this);">
                    <table style="">
                        <tr>
                            <td width="30%"><input id="filesinput" name="filesinput"
                                                   type="file" multiple="multiple" size="50"/>
                            </td>
                            <td width="60px" align="center"><input onclick="work();"
                                                                   name="play" id="play" type="submit" class="play"
                                                                   title="Recognize"
                                                                   value=""/>
                            </td>
                            <td width="60px" align="center"><input onclick="doTest();"
                                                                   name="test" id="test" type="submit" class="test" title="Test"
                                                                   value=""/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="openPDF(currentFile);" id="pdf"
                                    type="submit" class="pdf" title="PDF" value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="openScript();"
                                                                   name="openScript" id="openScript" type="submit"
                                                                   class="edit" title="Ã–ffnet den Skript Editor"
                                                                   value=""/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="var needle = prompt('Find:', textEditor.getCopyText());textEditor.find(needle);"
                                    name="searchCont" id="searchCont" type="submit" class="search"
                                    title="Search" value=""/>
                            </td>
                            <td width="60px" align="center"><input onclick="formatScript();"
                                                                   name="beautifyScript" id="beautifyScript" type="submit"
                                                                   class="beautify" title="Format" value=""
                                                                   style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="doBack();"
                                                                   id="back" value="" type="submit" title="Close" class="close"
                                                                   style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="closeScript();"
                                                                   name="closeScript" id="closeScript" type="submit"
                                                                   class="close" title="Close"
                                                                   value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="closeTest();"
                                                                   name="closeTest" id="closeTest" type="submit" class="close"
                                                                   title="Close"
                                                                   value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="activateScriptToContext();" name="activateScriptToContext" id="activateScriptToContext"
                                    type="submit" class="reload" title="Skript im Kontext aktualisieren" value=""
                                    style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="save(this.workDocument, textEditor.getSession().getValue());modifiedScript=null;"
                                    name="saveScript" id="saveScript" type="submit" class="save"
                                    title="Save" value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="getScript();"
                                                                   name="getScript" id="getScript" type="submit"
                                                                   class="download"
                                                                   title="Download"
                                                                   value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="sendScript();"
                                                                   name="sendScript" id="sendScript" type="submit"
                                                                   class="upload"
                                                                   title="Upload"
                                                                   value="" style="display: none"/>
                            </td>
                            <td width="60px" align="center"><input onclick="sendToInbox();"
                                                                   name="sendToInbox" id="sendToInbox" type="submit"
                                                                   class="sendToInbox"
                                                                   title="sendToInbox"
                                                                   value="" style="display: none"/>
                            </td>
                            <td width="50%">
                                <div id="progressbar" class="progressbar">
                                    <div class="progress-label"></div>
                                </div>
                            </td>
                            <td width="60px" align="center"><input onclick="format();"
                                                                   name="beautifyRules" id="beautifyRules" type="submit"
                                                                   class="beautify"
                                                                   title="Format" value=""/>
                            </td>

                            <td width="60px" align="center"><input
                                    onclick="var needle = prompt('Find:', rulesEditor.getCopyText());rulesEditor.find(needle);"
                                    name="searchRules" id="searchRules" type="submit" class="search"
                                    title="Search" value=""/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="rulesEditor.getSession().foldAll(1);"
                                    name="foldAll" id="foldAll" type="submit" class="minimize"
                                    title="Fold All" value=""/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="rulesEditor.getSession().unfold();"
                                    name="unfoldAll" id="unfoldAll" type="submit" class="maximize"
                                    title="Unfold All" value=""/></td>
                            <td width="60px" align="center"><input
                                    onclick="getRules(window.parent.rulesID, false);" name="getRules"
                                    id="getRules" type="submit" class="download" title="Download Regeln" value=""/>
                            </td>
                            <td width="60px" align="center"><input onclick="sendRules();"
                                                                   name="sendRules" id="sendRules" type="submit" class="upload"
                                                                   title="Sende Regeln" value=""/>
                            </td>
                            <td width="60px" align="center"><input
                                    onclick="save(currentRules, vkbeautify.xml(rulesEditor.getSession().getValue()));"
                                    name="saveRules" id="saveRules" type="submit" class="save" title="Save"
                                    value=""/>
                            </td>
                            <td width="60px" align="center">
                                <div id="switcher" class="themes" title="Test"></div>
                            </td>
                            <td id="appl" width="0px"></td>

                        </tr>
                    </table>
                </div>
                <!--Dokument-->
                <div id="verteilungWest" class="ui-tab-layout-west container ui-widget-header hidden">
                    <div id="headerWest" class="header">Dokument</div>
                    <div class="ui-widget-content" style="overflow:auto;">
                        <div id="dtable"></div>
                        <div id="inTxt" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
                    </div>
                </div>

                <!--Regeln-->
                <div id="verteilungCenter" class="ui-tab-layout-center container ui-widget-header hidden">
                    <div id="headerCenter" class="header">Regeln</div>
                    <div class="ui-widget-content">
                        <div id="inRules" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
                    </div>
                </div>
                <!--Ergebnis-->
                <div id="verteilungEast" class="ui-tab-layout-east container ui-widget-header hidden">
                    <div class="header">Ergebnis</div>
                    <div class="ui-widget-content">
                        <div id="inProps" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--Ausgabe-->
    <div id="contentSouth" class="ui-layout-south ui-widget-header container hidden">
        <div id="headerSouth" class="header">Ausgabe</div>
        <div class="ui-widget-content">
            <div id="inOutput" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
        </div>
    </div>
</div>

</body>

</html>