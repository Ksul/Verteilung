<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test Verteilung</title>
<script src="src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="src/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
<script src="src/theme-eclipse.js" type="text/javascript" charset="utf-8"></script>
<script src="src/mode-xml.js" type="text/javascript" charset="utf-8"></script>
<script src="src/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
<script src="src/mode-text.js" type="text/javascript" charset="utf-8"></script>

<script src="./recognition.js" type="text/javascript" charset="utf-8"></script>
<script src="./verteilung.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="./jquery-ui-1.10.2/jquery-1.9.1.js"></script>
<script type="text/javascript" src="./jquery-ui-1.10.2/ui/jquery-ui.js"></script>
<script type="text/javascript" src="./jquery.layout.js"></script>
<script type="text/javascript" src="jquery.cookie.js" charset="utf-8"></script>
<script type="text/javascript" src="jquery.hotkeys.js" charset="utf-8"></script>
<script type="text/javascript" src="jquery.jstree.js" charset="utf-8"></script>
<script type="text/javascript" src="jquery.dataTables.js" charset="utf-8"></script>

<script src="vkbeautify.js" type="text/javascript" charset="utf-8"></script>
<script src="jsbeautify.js" type="text/javascript" charset="utf-8"></script>

<script src="yui-min.js" type="text/javascript" type="text/javascript" charset="utf-8"></script>

<link rel="stylesheet" href="./themes/redmond/jquery-ui.css"/>
<link rel="stylesheet" href="./themes/demo_table.css"/>
<link type="text/css" rel="stylesheet" href="./themes/layout/layout-default.css"/>

<style type="text/css">

        /* remove padding & scrolling from panes that are 'containers' for nested layouts */
    .ui-layout-pane {
        border: 0; /* cosmetic */
        padding: 0;
        overflow: hidden;
    }

    .header {
        background: #80ade5 url(./resource/80ade5_40x100_textures_04_highlight_hard_100.png) 0 50% repeat-x;
        border-bottom: 1px solid #777;
        height: 12px;
        font-weight: normal;
        font-size: 9pt;
        text-align: center;
        padding-bottom: 2px;
        position: relative;
        overflow: hidden;
    }

body { font-size: 62.5%; }
label, input { display:block; }
input.text { margin-bottom:12px; width:95%; padding: .4em; }
fieldset { padding:0; border:0; margin-top:25px; }
h1 { font-size: 1.2em; margin: .6em 0; }
.ui-dialog .ui-state-error { padding: .3em; }
.validateTips { border: 1px solid transparent; padding: 0.3em; }

.ui-widget {
    font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif;
    font-size: 1.1em;
}

.ui-widget .ui-widget {
    font-size: 1em;
}

.ui-widget input, .ui-widget select, .ui-widget textarea, .ui-widget button {
    font-family: Trebuchet MS, Tahoma, Verdana, Arial, sans-serif;
    font-size: 1em;
}

.ui-widget-content {
    border: 1px solid #dddddd;
    background: #eeeeee url(./resource/ui-bg_highlight-soft_100_eeeeee_1x100.png) 50% top repeat-x;
    color: #333333;
}

.ui-widget-content a {
    color: #333333;
}

.ui-widget-header {
    border: 1px solid #e78f08;
    background: #f6a828 url(./resource/ui-bg_gloss-wave_35_f6a828_500x100.png) 50% 50% repeat-x;
    color: #ffffff;
    font-weight: bold;
}

.ui-widget-header a {
    color: #ffffff;
}

.ui-progressbar {
    height: 2em;
    text-align: left;
}

.ui-progressbar .ui-progressbar-value {
    margin: -1px;
    height: 100%;
}

.progress-label {
    float: left;
    margin-left: 50%;
    margin-top: 0px;
    font-weight: bold;
    text-shadow: 1px 1px 0 #fff;
}

#progressbar {
    width: 300px;
    height: 20px;
}

input.search {
    background-color: transparent;
    background-image: url('./resource/search.png');
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}



input.search:disabled {
    background-image: url('./resource/search-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.save {
    background-image: url('./resource/save.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer
}

input.save:disabled {
    background-image: url('./resource/save-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.play {
    background-image: url('./resource/play.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.play:disabled {
    background-image: url('./resource/play-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.maximize {
    background-image: url('./resource/maximize.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.maximize:disabled {
    background-image: url('./resource/maximize-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.minimize {
    background-image: url('./resource/minimize.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.minimize:disabled {
    background-image: url('./resource/minimize-bw.png');
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.upload {
    background-image: url('./resource/upload.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.upload:disabled {
    background-image: url('./resource/upload-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.download {
    background-image: url('./resource/download.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.download:disabled {
    background-image: url('./resource/download-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.beautify {
    background-image: url('./resource/beautify.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.beautify:disabled {
    background-image: url('./resource/beautify-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.pdf {
    background-image: url('./resource/file_pdf.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.pdf:disabled {
    background-image: url('./resource/file_pdf-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.close {
    background-image: url('./resource/exit.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.test {
    background-image: url('./resource/tabicon_pipette.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.reload {
    background-image: url('./resource/refresh.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.docAlfresco {
    background-image: url('./resource/alfresco.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

input.docAlfresco:disabled {
    background-image: url('./resource/alfresco-bw.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: text;
    disabled: true;
}

input.settings {
    background-image: url('./resource/settings.png');
    background-color: transparent;
    width: 24px;
    height: 24px;
    border: 0;
    cursor: pointer;
}

    .yui3-skin-sam .yui3-datatable-table {
        border-collapse: separate;
        border-spacing: 0;
        font-family: arial, sans-serif;
        font-size: 10px;
    }
</style>


<script type="text/javascript">

function toggleLiveResizing() {
    $.each($.layout.config.borderPanes, function (i, pane) {
        var o = myLayout.options[ pane ];
        o.livePaneResizing = !o.livePaneResizing;
    });
}
;

function toggleStateManagement(skipAlert, mode) {
    if (!$.layout.plugins.stateManagement) return;

    var options = myLayout.options.stateManagement
            , enabled = options.enabled // current setting
            ;
    if ($.type(mode) === "boolean") {
        if (enabled === mode) return; // already correct
        enabled = options.enabled = mode
    }
    else
        enabled = options.enabled = !enabled; // toggle option

    if (!enabled) { // if disabling state management...
        myLayout.deleteCookie(); // ...clear cookie so will NOT be found on next refresh
        if (!skipAlert)
            alert('This layout will reload as the options specify \nwhen the page is refreshed.');
    }
    else if (!skipAlert)
        alert('This layout will save & restore its last state \nwhen the page is refreshed.');


}
;

var myLayout;

$(document).ready(function () {




    // this layout could be created with NO OPTIONS - but showing some here just as a sample...
    // myLayout = $('body').layout(); -- syntax with No Options

    myLayout = $('body').layout({

        defaults: {
            size:					"auto"
            ,	minSize:				13
            ,	paneClass:				"pane" 		// default = 'ui-layout-pane'
            ,	initClosed:				false
            ,	contentSelector:		".content"	// inner div to auto-size so only it scrolls, not the entire pane!
            ,	contentIgnoreSelector:	"span"		// 'paneSelector' for content to 'ignore' when measuring room for content
            ,	resizerTip:				"Resize This Pane"
            //	effect defaults - overridden on some panes
            ,	fxName:					"slide"		// none, slide, drop, scale
            ,	fxSpeed_open:			800
            ,	fxSpeed_close:			1000
            ,	fxSettings_open:		{ easing: "easeInQuint" }
            ,	fxSettings_close:		{ easing: "easeOutQuint" }
            ,   closable:				true	// pane can open & close
            ,	resizable:				true	// when open, pane can be resized
            ,	slidable:				true	// when closed, pane can 'slide' open over other panes - closes on mouse-out
            ,	livePaneResizing:		true
            ,	spacing_open:			8  // ALL panes
            ,	spacing_closed:			12 // ALL panes
        }

        //	reference only - these options are NOT required because 'true' is the default


        , north: {
            slidable:			true	// OVERRIDE the pane-default of 'slidable=true'
            ,   size:                33
            ,   resizable:          false
        }

        //	some pane-size settings
        , west: {
            size:					.6
            ,	fxSettings_open:		{ easing: "easeOutBounce" }
            ,   closable:				true	// pane can open & close
            ,	resizable:				true	// when open, pane can be resized
            ,	slidable:				true
            ,   onresize:	            function () { textEditor.resize(); }
        }
        , center: {
            initHidden:             false
            ,  size:                .4
            ,  initClosed:          false
            ,  onresize:	        function () { rulesEditor.resize(); }

        }
        , south:{
            size:                   0.17
            ,   childOptions: {
                west:{
                    paneSelector:		".inner-west"
                    ,   size:            .74
                    ,  onresize:	     function () { outputEditor.resize(); }

                }
                , center:{
                    size:                 "auto"
                    ,   paneSelector:	  ".inner-center"
                    ,  onresize:	        function () { propsEditor.resize(); }
                }
            }
        }

        //	enable state management
        ,	stateManagement__enabled:	true // automatic cookie load & save enabled by default

        ,	showDebugMessages:			true // log and/or display messages from debugging & testing code
    });

    // if there is no state-cookie, then DISABLE state management initially
    var cookieExists = !$.isEmptyObject( myLayout.readCookie() );
    if (!cookieExists) toggleStateManagement( true, false );

});


$(function() {
    var server = $("#server"),
            user = $("#user"),
            password = $("#password"),
            proxy = $("#proxy"),
            port = $("#port"),
            allFields = $([]).add(server).add(user).add(password).add(proxy).add(port),
            tips = $(".validateTips");

    function updateTips(t) {
        tips.text(t).addClass("ui-state-highlight");
        setTimeout(function () {
        tips.removeClass("ui-state-highlight", 1500);
        }, 500);
    }

    function checkLength( o, n, min, max ) {
        if ((max != -1 && o.val().length > max) || (min != -1 && o.val().length < min)) {
            o.addClass( "ui-state-error" );
            if (min == -1)
                updateTips( "Länge von " + n + " muss größer als "  + max + " sein." );
            else if (max == -1)
                updateTips( "Länge von " + n + " muss kleiner als "  + min + " sein." );
            else
                updateTips( "Länge von " + n + " muss zwischen " + min + " und " + max + "." );
            return false;
        } else {
            return true;
        }
    }
    function checkRegexp( o, regexp, n ) {
        if ( !( regexp.test( o.val() ) ) ) {
            o.addClass( "ui-state-error" );
            updateTips( n );
            return false;
        } else {
            return true;
        }
    }
    $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 450,
        width: 350,
        modal: true,
        buttons: {
            "Save": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );
                bValid = bValid && checkRegexp( server, /(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/, "Server Adresse ist ungültig" );
                if (port.val().trim().length > 0)
                    bValid = bValid && checkRegexp( port, /\b([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-6])\b/, "Port Nummer ist ungültig" );
                bValid = bValid && checkLength(user, "User", 1, -1);
                bValid = bValid && checkLength(password, "Passwort", 1, -1);
                settings = {"settings": [{"key":"server", "value":server.val()},
                    {"key":"user", "value":user.val()},
                    {"key":"password", "value":password.val()},
                    {"key":"proxy", "value":proxy.val()},
                    {"key":"port", "value":port.val()}]};
                if ( bValid ) {
                    $.cookie("settings", JSON.stringify(settings), { expires: 9999 });
                    alert("Einstellungen gesichert");
                    init();
                    $( this ).dialog( "close" );
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    });

});


window.onload = function () {

    document.getElementById('filesinput').addEventListener('change', readMultiFile, false);
    if (isLocal()) {
        var obj = document.createElement('applet');
        obj.setAttribute('name', 'reader');
        obj.setAttribute('width', '1');
        obj.setAttribute('height', '1');
        obj.setAttribute('codebase', './WEB-INF/lib');
        obj.setAttribute('archive',
                'vt.jar, ' +
                        'pdfbox-1.6.0.jar, ' +
                        'plugin.jar, ' +
                        'bcprov-jdk15on-147.jar, ' +
                        'commons-codec-1.6.jar, ' +
                        'commons-httpclient-3.0.1.jar, ' +
                        'abdera-1.1.2.jar, ' +
                        'axiom.jar, ' +
                        'commons-logging-1.1.1.jar, ' +
                        'fontbox-1.6.0.jar, ' +
                        'jempbox-1.6.0.jar, ' +
                        'slf4j-api-1.6.6.jar, ' +
                        'commons-io-2.4.jar');
        obj.setAttribute('code', 'de.schulte.testverteilung.VerteilungApplet.class');
        document.getElementById('appl').appendChild(obj);
    }


    propsEditor = ace.edit("inProps");
    propsEditor.setReadOnly(true);
    propsEditor.renderer.setShowGutter(false);
    propsEditor.setShowPrintMargin(false);

    outputEditor = ace.edit("inOutput");
    outputEditor.setReadOnly(true);
    outputEditor.setShowPrintMargin(false);

    var zoneRules = document.getElementById('inRules');
    zoneRules.addEventListener('dragover', handleDragOver, false);
    zoneRules.addEventListener('drop', handleRulesSelect, false);

    rulesEditor = ace.edit("inRules");
    rulesEditor.setTheme("ace/theme/eclipse");
    var xmlMode = require("ace/mode/xml").Mode;
    rulesEditor.getSession().setMode(new xmlMode());
    rulesEditor.setShowPrintMargin(false);
    rulesEditor.setDisplayIndentGuides(true);
    rulesEditor.commands.addCommand({
        name : "save",
        bindKey : {
            win : "Ctrl-Shift-S",
            mac : "Command-s"
        },
        exec : save
    });
    rulesEditor.commands.addCommand({
        name : "format",
        bindKey : {
            win : "Ctrl-Shift-F",
            mac : "Command-f"
        },
        exec : format
    });

    textEditor = ace.edit("inTxt");
    textEditor.setTheme("ace/theme/chrome");
    textEditor.setShowInvisibles(true);
    textEditor.setShowPrintMargin(false);
    jsMode = require("ace/mode/javascript").Mode;
    txtMode = require("ace/mode/text").Mode;
    textEditor.getSession().setMode(new txtMode());
    var zone = document.getElementById('inTxt');
    zone.addEventListener('dragover', handleDragOver, false);
    zone.addEventListener('drop', handleFileSelect, false);
/*    YUI({
        gallery: 'gallery-2012.08.08-20-03'
    }).use('datatable', 'gallery-datatable-row-expansion', callBack);*/
    $('#dtable').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="tabelle"></table>' );
    tabelle = $('#tabelle').dataTable( {
        "aaData": [],
        "aoColumns": [
            { "sTitle": "Name" },
            { "sTitle": "Dokumenttyp" },
            { "sTitle": "Ergebnis" }
        ]
    } );
    tree = $("#tree").jstree({
        "themes": {
            "theme": "corral",
            "dots": true,
            "icons": true
        },
        "json_data": {
            "data": function (aNode, aFunction) {
                if (isLocal()) {
                    try {
                        var ret = document.reader.listFolderAsJSON(aNode.attr ? aNode.attr("id") : "", "true", getSettings("server"), getSettings("user"), getSettings("password"), getSettings("proxy"), getSettings("port"));
                        aFunction($.parseJSON(ret));
                    } catch (e) {
                        errorHandler(e);
                    }
                } else {
                    var dataString = {
                        "function": "listFolderAsJSON",
                        "filePath": aNode.attr ? aNode.attr("id") : "",
                        "server": getSettings("server"),
                        "username": getSettings("user"),
                        "password": getSettings("password"),
                        "searchFolder": "true",
                        "withFolder": "true",
                        "proxyHost": getSettings("proxy"),
                        "proxyPort": getSettings("port")
                    };
                    $.ajax({
                        type: "POST",
                        data: dataString,
                        cache: false,
                        datatype: "json",
                        url: "VerteilungServlet",
                        success: function (erg) {
                                aFunction(erg);
                        },
                        error: function (response) {
                            try {
                                var r = jQuery.parseJSON(response.responseText);
                                alert("Fehler: " + r.Message + "\nStackTrace: " + r.StackTrace + "\nExceptionType: " + r.ExceptionType);
                            } catch (e) {
                                errorHandler(e);
                            }
                        }
                    });
                }
            }
        },
        "plugins": [ "themes", "json_data", "ui", "crrm", "dnd", "search", "types", "hotkeys", "contextmenu"]
    }).bind("select_node.jstree",function (event, data) {
                if (data.rslt.obj.attr("rel") == "default") {
                    try {
                        if (isLocal()) {
                            var ret = document.reader.getContent(data.rslt.obj.attr("id"), true, getSettings("server"), getSettings("user"), getSettings("password"), getSettings("proxy"), getSettings("port"), null);
                            var json = jQuery.parseJSON(ret);
                            if (json.success) {
                                textEditor.getSession().setValue(json.result);
                                currentContent = json.result;
                                currentFile = data.rslt.obj.text().trim();
                                document.getElementById('headerWest').textContent = currentFile;
                                alfrescoMode = false;
                                manageControls();

                            } else
                                alert("Daten konnten nicht übertragen werden: " + json.result)
                        } else {
                            var dataString = {
                                "function": "getContent",
                                "documentId": data.rslt.obj.attr("id"),
                                "extract": "true",
                                "server": getSettings("server"),
                                "username": getSettings("user"),
                                "password": getSettings("password"),
                                "proxyHost": getSettings("proxy"),
                                "proxyPort": getSettings("port")
                            };
                            $.ajax({
                                type: "POST",
                                data: dataString,
                                cache: false,
                                datatype: "json",
                                url: "VerteilungServlet",
                                success: function (erg) {
                                    if (erg.success[0]) {
                                        textEditor.getSession().setValue(erg.result.toString());
                                        currentContent = erg.result.toString();
                                        currentFile = data.rslt.obj.text().trim();
                                        document.getElementById('headerWest').textContent = currentFile;
                                        alfrescoMode = false;
                                        manageControls();

                                    } else
                                        alert("Daten konnten nicht übertragen werden: " + erg.result[0]);
                                },
                                error: function (response) {
                                    try {
                                        var r = jQuery.parseJSON(response.responseText);
                                        alert("Fehler: " + r.Message + "\nStackTrace: " + r.StackTrace + "\nExceptionType: " + r.ExceptionType);
                                    } catch (e) {
                                        errorHandler(e);
                                    }
                                }
                            });
                        }
                    } catch (e) {
                        errorHandler(e);
                    }
                }
            }).delegate("a", "click", function (event, data) {
                event.preventDefault();
            });
    init();
};

var rulesEditor;
var textEditor;
var propsEditor;
var outputEditor;
var alfrescoMode = false;
var scriptID = null;
var rulesID = null;
var inboxID = null;
var rootID = null;
var currentRules = null;
var scriptMode = false;
var testMode = false;
var runLocal = false;
var REC;
var treeObject;
var tree;
var tabelle;
var workDocument = null;
var multiMode = false;
var currentPDF = false;
var showMulti = false;
var currentFile = null;
var currentContent = false;
var currentContainer = null;
var jsMode;
var txtMode;
var panelSizeReminder;
var settings;
var alfrescoServerAvailable = false;
REC = new Recognition();
REC.set(REC);


treeObject = jQuery.jstree._reference(tree);



</script>


</head>
<body>

<!-- manually attach allowOverflow method to pane -->
<div class="ui-layout-north" onmouseover="myLayout.allowOverflow('north')" onmouseout="myLayout.resetOverflow(this)">
    <table style="">
        <tr>
            <td width="30%"><input id="filesinput" name="filesinput"
                                   type="file" multiple="multiple" size="50"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="openSettings();"
                    name="settings" id="settings" type="submit" class="settings"
                    title="Open Settings" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="loadAlfresco();"
                    name="docAlfresco" id="docAlfresco" type="submit" class="docAlfresco"
                    title="Load Alfresco" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="closeAlfresco();"
                                                   id="closeAlfresco" value="" type="submit" title="Close" class="close"
                                                   style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="work();"
                                                   name="play" id="play" type="submit" class="play" title="Recognize"
                                                   value=""/>
            </td>
            <td width="60px" align="center"><input onclick="doTest();"
                                                   name="test" id="test" type="submit" class="test" title="Test"
                                                   value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="openPDF(currentFile);" id="pdf"
                    type="submit" class="pdf" title="PDF" value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="loadScript();"
                                                   name="loadScript" id="loadScript" type="image"
                                                   src="./resource/file_edit.png" title="Script" value="Script"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="var needle = prompt('Find:', textEditor.getCopyText());textEditor.find(needle);"
                    name="searchCont" id="searchCont" type="submit" class="search"
                    title="Search" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="formatScript();"
                                                   name="beautifyScript" id="beautifyScript" type="submit"
                                                   class="beautify" title="Format" value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="doBack();"
                                                   id="back" value="" type="submit" title="Close" class="close"
                                                   style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="closeScript();"
                                                   name="closeScript" id="closeScript" type="submit" class="close" title="Close"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="closeTest();"
                                                   name="closeTest" id="closeTest" type="submit" class="close" title="Close"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="reloadScript(true);" name="reloadScript" id="reloadScript"
                    type="submit" class="reload" title="Reload" value=""
                    style="display: none"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="save(this.workDocument, textEditor.getSession().getValue(), true);modifiedScript=null;"
                    name="saveScript" id="saveScript" type="submit" class="save"
                    title="Save" value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="getScript(true);"
                                                   name="getScript" id="getScript" type="submit" class="download"
                                                   title="Download"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="sendScript(true);"
                                                   name="sendScript" id="sendScript" type="submit" class="upload"
                                                   title="Upload"
                                                   value="" style="display: none"/>
            </td>
            <td width="50%">
                <div id="progressbar" class="progressbar">
                    <div class="progress-label"></div>
                </div>
            </td>
            <td width="60px" align="center"><input onclick="format();"
                                                   name="beautifyRules" id="beautifyRules" type="submit" class="beautify"
                                                   title="Format" value=""/>
            </td>

            <td width="60px" align="center"><input
                    onclick="var needle = prompt('Find:', rulesEditor.getCopyText());rulesEditor.find(needle);"
                    name="searchRules" id="searchRules" type="submit" class="search"
                    title="Search" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="this.rulesEditor.getSession().foldAll(1);"
                    name="foldAll" id="foldAll" type="submit" class="minimize"
                    title="Fold All" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="this.rulesEditor.getSession().unfold();"
                    name="unfoldAll" id="unfoldAll" type="submit" class="maximize"
                    title="Unfold All" value=""/></td>
            <td width="60px" align="center"><input
                    onclick="getRules(window.parent.rulesID, false, true);" name="getRules"
                    id="getRules" type="submit" class="download" title="Download Regeln" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="sendRules(true);"
                                                   name="sendRules" id="sendRules" type="submit" class="upload"
                                                   title="Sende Regeln" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="save(currentRules, vkbeautify.xml(rulesEditor.getSession().getValue()), true);"
                    name="saveRules" id="saveRules" type="submit" class="save" title="Save"
                    value=""/>
            </td>
            <td id="appl" width="0px"></td>
        </tr>
    </table>

</div>

<!-- allowOverflow auto-attached by option: west__showOverflowOnHover = true -->


<div class="ui-layout-south">
    <div class="inner-west">
        <div class="header">Console</div>
        <div class="content">
            <div id="inOutput"style="position:absolute; top:14px;bottom:0;left:0;right:0"></div>
        </div>
    </div>
    <div class="inner-center">
        <div class="header">Ergebnis</div>
        <div class="content">
            <div id="inProps" style="position:absolute; top:14px;bottom:0;left:0;right:0"></div>
        </div>
    </div>
</div>

<div class="ui-layout-west">
    <div id="headerWest" class="header"> </div>
    <div class="content">
     <!--   <div class="example yui3-skin-sam">
            <div id="dtable"></div>
            <div id="labels"></div>
        </div>
     -->   <div id="dtable"></div>
        <div id="inTxt" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
        <div id="tree"></div>
    </div>
</div>

<div class="ui-layout-center">
    <div id="headerCenter" class="header">Regeln</div>
    <div class="content">
        <div id="inRules" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
    </div>
</div>
<div id="dialog-form" title="Server-Settings">
    <p class="validateTips">Server Einstellungen festlegen</p>
    <form>
        <fieldset>
            <label for="server">Server</label>
            <input type="text" name="server" id="server" class="text ui-widget-content ui-corner-all" />
            <label for="user">User</label>
            <input type="text" name="user" id="user"  class="text ui-widget-content ui-corner-all" />
            <label for="password">Password</label>
            <input type="password" name="password" id="password"  class="text ui-widget-content ui-corner-all" />
            <label for="proxy">Proxy</label>
            <input type="text" name="proxy" id="proxy"  class="text ui-widget-content ui-corner-all" />
            <label for="port">Port</label>
            <input type="text" name="port" id="port" class="text ui-widget-content ui-corner-all" />
        </fieldset>
    </form>
</div>
</body>
</html>