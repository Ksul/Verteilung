<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test Verteilung</title>

<script src="./src/main/javascript/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/ace/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/ace/theme-eclipse.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/ace/mode-xml.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/ace/mode-text.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="./src/main/javascript/alfrescoClient.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/dialoge.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/recognition.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/verteilung.js"  charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-1.10.2.js"></script>
<script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-ui-1.10.4.custom.min.js"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.layout.js"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.layout.resizeTabLayout-1.3.js"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.cookie.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.hotkeys.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.jstree.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.themeswitcher.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.dataTables.js" charset="utf-8"></script>
<script type="text/javascript" src="./src/main/javascript/jquery.price-format.js" charset="utf-8"></script>

<script type="text/javascript" src="./src/main/javascript/alpaca/alpaca/alpaca.js"></script>

<script src="./src/main/javascript/vkbeautify.js" type="text/javascript" charset="utf-8"></script>
<script src="./src/main/javascript/jsbeautify.js" type="text/javascript" charset="utf-8"></script>

<link type="text/css" href="./src/main/javascript/alpaca/alpaca/alpaca.css" rel="stylesheet"/>
<!--<link type="text/css" href="./src/main/resource/simplegrid.css" rel="stylesheet"/>-->
<link type="text/css" href="./src/main/resource/ArchivLayout.css" rel="stylesheet"/>


<script type="text/javascript" charset="utf-8">

function toggleLiveResizing() {
    $.each($.layout.config.borderPanes, function (i, pane) {
        var o = verteilungLayout.options[ pane ];
        o.livePaneResizing = !o.livePaneResizing;
    });
}


function toggleStateManagement(skipAlert, mode) {
    if (!$.layout.plugins.stateManagement) return;

    var options = verteilungLayout.options.stateManagement
            , enabled = options.enabled // current setting
            ;
    if ($.type(mode) === "boolean") {
        if (enabled === mode) return; // already correct
        enabled = options.enabled = mode
    }
    else
        enabled = options.enabled = !enabled; // toggle option

    if (!enabled) { // if disabling state management...
        verteilungLayout.deleteCookie(); // ...clear cookie so will NOT be found on next refresh
        if (!skipAlert)
            alert('This layout will reload as the options specify \nwhen the page is refreshed.');
    }
    else if (!skipAlert)
        alert("This layout will save and restore its last state \nwhen the page is refreshed.");
}




$(document).ready(function () {

    loadLayout();
    $( document ).tooltip();

    $("#switcher").themeswitcher({
        imgpath: "./themes/images/",
        loadTheme: "Cupertino" ,
        additionalthemes: [{title:"Aristo",name:"aristo",icon:"Aristo.jpg",url:"./themes/Aristo/jquery-ui.css"}],
        jqueryuiversion: "1.9.1"
    });
});



$.fn.dataTableExt.oPagination.listbox = {

    "fnInit": function (oSettings, nPaging, fnCallbackDraw) {
        var nInput = document.createElement('select');
        var nPage = document.createElement('span');
        var nOf = document.createElement('span');
        nOf.className = "paginate_of";
        nPage.className = "paginate_page";
        if (oSettings.sTableId !== '') {
            nPaging.setAttribute('id', oSettings.sTableId + '_paginate');
        }
        nInput.style.display = "inline";
        nPage.innerHTML = "Seite ";
        nPaging.appendChild(nPage);
        nPaging.appendChild(nInput);
        nPaging.appendChild(nOf);
        $(nInput).change(function (e) { // Set DataTables page property and redraw the grid on listbox change event.
            window.scroll(0,0); //scroll to top of page
            if (this.value === "" || this.value.match(/[^0-9]/)) {
                return;
            }
            var iNewStart = oSettings._iDisplayLength * (this.value - 1);
            if (iNewStart > oSettings.fnRecordsDisplay()) {
                oSettings._iDisplayStart = (Math.ceil((oSettings.fnRecordsDisplay() - 1) / oSettings._iDisplayLength) - 1) * oSettings._iDisplayLength;
                fnCallbackDraw(oSettings);
                return;
            }
            oSettings._iDisplayStart = iNewStart;
            fnCallbackDraw(oSettings);
        }); // Take the brutal approach to cancelling text selection
        $('span', nPaging).bind('mousedown', function () {
            return false;
        });
        $('span', nPaging).bind('selectstart', function () {
            return false;
        });
    },


    "fnUpdate": function (oSettings, fnCallbackDraw) {
        if (!oSettings.aanFeatures.p) {
            return;
        }
        var iPages = Math.ceil((oSettings.fnRecordsDisplay()) / oSettings._iDisplayLength);
        var iCurrentPage = Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength) + 1; // Loop over each instance of the pager
        var an = oSettings.aanFeatures.p;
        for (var i = 0, iLen = an.length; i < iLen; i++) {
            var spans = an[i].getElementsByTagName('span');
            var inputs = an[i].getElementsByTagName('select');
            var elSel = inputs[0];
            if(elSel.options.length != iPages) {
                elSel.options.length = 0; //clear the listbox contents
                for (var j = 0; j < iPages; j++) { //add the pages
                    var oOption = document.createElement('option');
                    oOption.text = j + 1;
                    oOption.value = j + 1;
                    try {
                        elSel.add(oOption, null); // standards compliant; doesn't work in IE
                    } catch (ex) {
                        elSel.add(oOption); // IE only
                    }
                }
                spans[1].innerHTML = " &nbsp;von &nbsp;" + iPages;
            }
            elSel.value = iCurrentPage;
        }
    }
};

window.onload = function () {

 start();
};

var rulesEditor;
var textEditor;
var propsEditor;
var outputEditor;
var alfrescoMode = false;
var scriptID = null;
var rulesID = null;
var inboxID = null;
var rootID = null;
var currentRules = null;
var scriptMode = false;
var testMode = false;
var runLocal = false;
var REC;
var treeObject;
var tree;
var tabelle;
var alfrescoTabelle;
var alfrescoFolderTabelle;
var workDocument = null;
var multiMode = false;
var currentPDF = false;
var showMulti = false;
var currentFile = null;
var currentContent = false;
var currentText = false;
var currentContainer = null;
var jsMode;
var txtMode;
var panelSizeReminder;
var settings;
var alfrescoServerAvailable = false;
var alfrescoLayout;
var verteilungLayout;
REC = new Recognition();
REC.set(REC);
treeObject = jQuery.jstree._reference(tree);

</script>

</head>

<body>


<div id="clientPage" class="ui-state-active">

    <div id="tabs" class="container">
        <ul id="tabButtons" class="container">
            <li><a href="#tab1">Archiv</a></li>
            <li><a href="#tab2">Verteilung</a></li>
        </ul>
        <div id="tabPanels" class="container ui-state-active">
            <div id="tab1" class="tabPanel ui-widget-content hidden">

                <div id="alfrescoSouth" class="ui-tab-layout-south container ui-widget-header hidden">
                    <div id="alfrescoHeaderSouth" class="header">Konsole</div>
                    <div class="ui-widget-content">
                        Konsole?
                    </div>
                </div>
                <div id="alfrescoWest" class="ui-tab-layout-west container ui-widget-header hidden">
                    <div id="alfrescoHeaderWest" class="header">Archiv</div>
                    <div class="ui-widget-content">
                        <div id="tree"></div>
                    </div>
                </div>
                <div id="alfrescoCenter" class="ui-tab-layout-center container ui-widget-header hidden">
                    <div id="alfrescoHeaderCenter" class="header">Inhalt</div>

                    <div id="alfrescoCenterInnerCenter" class="inner-center container ui-widget-header hidden">
                        <div class="header">Dokumente</div>
                        <div class="ui-widget-content">
                            <div id="dtable2">
                                <table cellpadding="0" cellspacing="0" border="0" class="display"
                                       id="alfrescoTabelle"></table>
                            </div>
                        </div>
                    </div>

                    <div id="alfrescoCenterInnerNorth" class="inner-center container ui-widget-header hidden">
                        <div class="header">Ordner</div>
                        <div class="ui-widget-content">
                            <div id="dtable3">
                                <table cellpadding="0" cellspacing="0" border="0" class="display"
                                       id="alfrescoFolderTabelle"></table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="tab2" class="tabPanel ui-widget-content hidden">
                <div id="verteilungSouth" class="ui-tab-layout-south container hidden">
                    <div id="verteilungSouthInnerWest" class="inner-west container ui-widget-header hidden">
                        <div class="header">Konsole</div>
                        <div class="ui-widget-content">
                            <div id="inOutput" style="position:absolute; top:0px;bottom:0;left:0;right:0"></div>
                        </div>
                    </div>
                    <div id="verteilungSouthInnerCenter" class="inner-center container ui-widget-header hidden">
                        <div class="header">Ergebnis</div>
                        <div class="ui-widget-content">
                            <div id="inProps" style="position:absolute; top:0px;bottom:0;left:0;right:0"></div>
                        </div>
                    </div>
                </div>

                <div id="verteilungWest" class="ui-tab-layout-west container ui-widget-header hidden">
                    <div id="headerWest" class="header"></div>
                    <div class="ui-widget-content" style="overflow:auto;">
                        <div id="dtable"></div>
                        <div id="inTxt" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
                    </div>
                </div>


                <div id="verteilungCenter" class="ui-tab-layout-center container ui-widget-header hidden">
                    <div id="headerCenter" class="header">Regeln</div>
                    <div class="ui-widget-content">
                        <div id="inRules" style="position:absolute; top:0;bottom:0;left:0;right:0"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="contentNorth" class="ui-layout-north container ui-widget-content" onmouseover="verteilungLayout.allowOverflow(this); alfrescoLayout.allowOverflow(this);"
        >
    <table style="">
        <tr>
            <td width="30%"><input id="filesinput" name="filesinput"
                                   type="file" multiple="multiple" size="50"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="startSettingsDialog();"
                    name="settings" id="settings" type="submit" class="settings"
                    title="Open Settings" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="work();"
                                                   name="play" id="play" type="submit" class="play"
                                                   title="Recognize"
                                                   value=""/>
            </td>
            <td width="60px" align="center"><input onclick="doTest();"
                                                   name="test" id="test" type="submit" class="test" title="Test"
                                                   value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="openPDF(currentFile);" id="pdf"
                    type="submit" class="pdf" title="PDF" value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="loadScript();"
                                                   name="loadScript" id="loadScript" type="image"
                                                   src="src/main/resource/images/file_edit.png" title="Script"
                                                   value="Script"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="var needle = prompt('Find:', textEditor.getCopyText());textEditor.find(needle);"
                    name="searchCont" id="searchCont" type="submit" class="search"
                    title="Search" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="formatScript();"
                                                   name="beautifyScript" id="beautifyScript" type="submit"
                                                   class="beautify" title="Format" value=""
                                                   style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="doBack();"
                                                   id="back" value="" type="submit" title="Close" class="close"
                                                   style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="closeScript();"
                                                   name="closeScript" id="closeScript" type="submit"
                                                   class="close" title="Close"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="closeTest();"
                                                   name="closeTest" id="closeTest" type="submit" class="close"
                                                   title="Close"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="reloadScript();" name="reloadScript" id="reloadScript"
                    type="submit" class="reload" title="Reload" value=""
                    style="display: none"/>
            </td>
            <td width="60px" align="center"><input
                    onclick="save(this.workDocument, textEditor.getSession().getValue());modifiedScript=null;"
                    name="saveScript" id="saveScript" type="submit" class="save"
                    title="Save" value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="getScript();"
                                                   name="getScript" id="getScript" type="submit"
                                                   class="download"
                                                   title="Download"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="sendScript();"
                                                   name="sendScript" id="sendScript" type="submit"
                                                   class="upload"
                                                   title="Upload"
                                                   value="" style="display: none"/>
            </td>
            <td width="60px" align="center"><input onclick="sendToInbox();"
                                                   name="sendToInbox" id="sendToInbox" type="submit"
                                                   class="sendToInbox"
                                                   title="sendToInbox"
                                                   value="" style="display: none"/>
            </td>
            <td width="50%">
                <div id="progressbar" class="progressbar">
                    <div class="progress-label"></div>
                </div>
            </td>
            <td width="60px" align="center"><input onclick="format();"
                                                   name="beautifyRules" id="beautifyRules" type="submit"
                                                   class="beautify"
                                                   title="Format" value=""/>
            </td>

            <td width="60px" align="center"><input
                    onclick="var needle = prompt('Find:', rulesEditor.getCopyText());rulesEditor.find(needle);"
                    name="searchRules" id="searchRules" type="submit" class="search"
                    title="Search" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="rulesEditor.getSession().foldAll(1);"
                    name="foldAll" id="foldAll" type="submit" class="minimize"
                    title="Fold All" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="rulesEditor.getSession().unfold();"
                    name="unfoldAll" id="unfoldAll" type="submit" class="maximize"
                    title="Unfold All" value=""/></td>
            <td width="60px" align="center"><input
                    onclick="getRules(window.parent.rulesID, false);" name="getRules"
                    id="getRules" type="submit" class="download" title="Download Regeln" value=""/>
            </td>
            <td width="60px" align="center"><input onclick="sendRules();"
                                                   name="sendRules" id="sendRules" type="submit" class="upload"
                                                   title="Sende Regeln" value=""/>
            </td>
            <td width="60px" align="center"><input
                    onclick="save(currentRules, vkbeautify.xml(rulesEditor.getSession().getValue()));"
                    name="saveRules" id="saveRules" type="submit" class="save" title="Save"
                    value=""/>
            </td>
            <td width="60px" align="center">
                <div id="switcher" class="themes" title="Test"></div>
            </td>
            <td id="appl" width="0px"></td>
        </tr>
    </table>

</div>
</div>
</body>

</html>