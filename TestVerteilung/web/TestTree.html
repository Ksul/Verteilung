<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>jsTree &raquo; Demo</title>
    <meta name="title" content="jsTree - jQuery tree plugin - Demo"/>
    <meta name="description" content="A demo covering most of the functions and plugins."/>
    <meta name="ttw" content="8gy2z6g"/>
<head>
    <script src="./src/main/javascript/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/theme-eclipse.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-xml.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-text.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" src="./src/main/javascript/alfrescoClient.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/dialoge.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/recognition.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/verteilung.js"  charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-ui-1.10.4.custom.min.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.layout.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.layout.resizeTabLayout-1.3.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.cookie.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.hotkeys.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jstree.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.themeswitcher.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.dataTables.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.price-format.js" charset="utf-8"></script>


    <script>

        function getSettings(wort) {
            var ret ="";
            if (wort == "server")
              ret = "http://ksul.dyndns.org:91080";
            if (wort == "user" || wort == "password")
            ret = "admin";
            if (wort == "proxy")
                ret = "www-proxy";
            if (wort == "port")
                ret = "8080";
            return ret;
        }


        $(document).ready(function () {
            $('#tree')
                    .jstree({
                        'core' : {
                            'data' : {
                                'url' : '?operation=get_node',
                                'data' : function (node) {
                                    return { 'id' : node.id };
                                }
                            },
                            'check_callback' : true,
                            'themes' : {
                                'responsive' : false
                            }
                        },
                        'plugins' : ['state','dnd','contextmenu','wholerow']
                    })
                    .on('delete_node.jstree', function (e, data) {
                        $.get('?operation=delete_node', { 'id' : data.node.id })
                                .fail(function () {
                                    data.instance.refresh();
                                });
                    })
                    .on('create_node.jstree', function (e, data) {
                        $.get('?operation=create_node', { 'id' : data.node.parent, 'position' : data.position, 'text' : data.node.text })
                                .done(function (d) {
                                    data.instance.set_id(data.node, d.id);
                                })
                                .fail(function () {
                                    data.instance.refresh();
                                });
                    })
                    .on('rename_node.jstree', function (e, data) {
                        $.get('?operation=rename_node', { 'id' : data.node.id, 'text' : data.text })
                                .fail(function () {
                                    data.instance.refresh();
                                });
                    })
                    .on('move_node.jstree', function (e, data) {
                        $.get('?operation=move_node', { 'id' : data.node.id, 'parent' : data.parent, 'position' : data.position })
                                .fail(function () {
                                    data.instance.refresh();
                                });
                    })
                    .on('copy_node.jstree', function (e, data) {
                        $.get('?operation=copy_node', { 'id' : data.original.id, 'parent' : data.parent, 'position' : data.position })
                                .always(function () {
                                    data.instance.refresh();
                                });
                    })
                    .on('changed.jstree', function (e, data) {
                        if(data && data.selected && data.selected.length) {
                            $.get('?operation=get_content&id=' + data.selected.join(':'), function (d) {
                                $('#data .default').html(d.content).show();
                            });
                        }
                        else {
                            $('#data .content').hide();
                            $('#data .default').html('Select a file from the tree.').show();
                        }
                    });

        });
    </script>
</head>
<body>
<div id="tree">
</div>
</body>

</html>