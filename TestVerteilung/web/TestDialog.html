<!DOCTYPE html>
<html lang="en"><head>


    <meta charset="utf-8"><title>jQuery UI Dialog - Modal form</title>

    <script src="./src/main/javascript/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/theme-chrome.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/theme-eclipse.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-xml.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/ace/mode-text.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" src="./src/main/javascript/alfrescoClient.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/dialoge.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/recognition.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/verteilung.js"  charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery-ui/js/jquery-ui-1.10.4.custom.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.layout.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.layout.resizeTabLayout-1.3.js"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.cookie.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.hotkeys.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.jstree.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.themeswitcher.js" charset="utf-8"></script>
    <script type="text/javascript" src="./src/main/javascript/jquery.dataTables.js" charset="utf-8"></script>

    <script type="text/javascript" src="./src/main/javascript/alpaca/alpaca/alpaca.js"></script>

    <script src="./src/main/javascript/vkbeautify.js" type="text/javascript" charset="utf-8"></script>
    <script src="./src/main/javascript/jsbeautify.js" type="text/javascript" charset="utf-8"></script>

    <link type="text/css" href="./src/main/javascript/alpaca/alpaca/alpaca.css" rel="stylesheet"/>
    <link type="text/css" href="./src/main/resource/simplegrid.css" rel="stylesheet"/>
    <link type="text/css" href="./src/main/resource/ArchivLayout.css" rel="stylesheet"/>
    <link type="text/css" href="./src/main/javascript/jquery-ui/css/cupertino/jquery-ui-1.10.4.custom.css" rel="stylesheet"/>


    <script>



    $(function() {

            var dialogSettings = { "id": "settingsDialog",
                "schema": {
                    "type": "object",
                    "title": "Server Einstellungen",
                    "properties": {

                        "user": {
                            "type": "string",
                            "title": "Benutzer",
                            "required": true
                        },
                        "password": {
                            "type": "string",
                            "title": "Password",
                            "required": true,
                            "pattern": "^[a-zA-Z0-9_]+$"
                        },

                        "server": {
                            "type": "string",
                            "title": "Server",
                            "required": true
                        }
                    }
                },

                "options": {
                    "renderForm": true,
                    "form":{

                        "attributes":{
                            "action":"../../endpoints/echo.php",
                            "method":"post"
                        },
                        "buttons":{
                            "submit":{"value":"Sichern"},
                            "reset":{"value":"Abbrechen"}
                        }
                    },
                    "fields": {

                        "user": {
                            "size": 30
                        },
                        "password": {
                            "type": "password",
                            "size": 20 }
                        } ,
                        "server": {
                            "size": 65
                        }

                },
               /* "data": {
                    "user": "1234",
                    "password": "@@@" ,
                    "server": "wdwdwd"
                },*/
                "view": {
                    "parent": "VIEW_WEB_EDIT",
                    "layout": {
                        "template": "threeColumnGridLayout",
                        "bindings": {

                           /* "user": "column-1",
                            "password": "column-2",
                            "server": "column-1-2",*/
                            "server":"column-1-1",
                            "user":"column-1-7_12",
                            "password":"column-2-5_12"

                        }
                    },
                    "templates": {
                        "threeColumnGridLayout": '<div class="filter-content">' + '{{if options.label}}<h2>${options.label}</h2><span></span>{{/if}}' + '{{if options.helper}}<p>${options.helper}</p>{{/if}}'
                                + '<div id="column-1-1" class="col-1-1"> </div>'
                                + '<div id="column-1-2" class="col-1-2"> </div> <div id="column-2-2" class="col-1-2"> </div>'
                                + '<div id="column-1-7_12" class="col-7-12"> </div> <div id="column-2-5_12" class="col-5-12"> </div>'
                                + '<div id="column-1-3" class="col-1-3"> </div> <div id="column-2-3" class="col-1-3"> </div> <div id="column-3-3" class="col-1-3"> </div>'
//                                + '<div id="column-1" class="grid_6"> </div>' + '<div id="column-2" class="grid_6"> </div>' + '<div class="grid_8 push_8"> <div id="column-3" class="grid_6"> </div> </div>' +  '<div class="clear"></div>'
//                                + '<div id="column-1-2" class="grid_3"> </div>' + '<div id="column-2" class="grid_6"> </div>' + '<div class="clear"></div>'
                                + '</div>'
                    }

                },
                "ui": "jquery-ui"

            } ;

            var dialogLayout;
            /*var server = $( "#server" ),
                    user = $( "#user" ),
                    password = $( "#password" ),
                    allFields = $( [] ).add( server ).add( user ).add( password ),
                    tips = $( ".validateTips" );*/
            function updateTips( t ) {
                tips
                        .text( t )
                        .addClass( "ui-state-highlight" );
                setTimeout(function() {
                    tips.removeClass( "ui-state-highlight", 1500 );
                }, 500 );
            }
            function checkLength( o, n, min, max ) {
                if ( o.val().length > max || o.val().length < min ) {
                    o.addClass( "ui-state-error" );
                    updateTips( "Length of " + n + " must be between " +
                            min + " and " + max + "." );
                    return false;
                } else {
                    return true;
                }
            }
            function checkRegexp( o, regexp, n ) {
                if ( !( regexp.test( o.val() ) ) ) {
                    o.addClass( "ui-state-error" );
                    updateTips( n );
                    return false;
                } else {
                    return true;
                }
            }


            changeCss('.grid','max-width: 100%; min-width:100%');
            changeCss('input', 'width:100%');

            //changeCss ('.ui-dialog', 'overflow: hidden');
            changeCss('h2','background-color: transparent; background-image: url("./src/main/resource/images/alfresco.png"); background-repeat: no-repeat; background-position: left; height: 24px; border: 0; padding-left: 28px; padding-top: 4px');
            $('<div id="dialogBox">').append(Alpaca($('<div id="form" class="grid grid-pad">'), dialogSettings)).dialog({
                autoOpen: false,
                width: 420,
                height:'auto',
                modal: true,
                open:		function() {
                  /*  if (!dialogLayout) {            Einige Batchanwendungen (Unfall / Konzerninkasso) haben durch die Verwendung von Zentralkomponenten sehr viele Abhängigkeiten. Die EAR Files der Anwendungen sind dann bis zu 160 MB groß und verbrauchen sehr viel Speicher. Außerdem liegen die Startzeiten dieser Anwendungen bei ca. 20 Minuten, so dass es bei Fehlersituationen recht lange dauert diese zu beheben, auch weil der Build lange läuft.


                        // init layout *the first time* dialog opens
                        dialogLayout = $("#dialogBox").layout();

                    }
                    else
                    // just in case - probably not required
                        dialogLayout.resizeAll();*/
                },
                buttons: {

                    "Save": {
                        "id" : "btn-ok",
                        "text": "Save",
                        "click": function() {
                        var server = $("[name='server']"),
                                user = $("[name='user']"),
                                password = $("[name='password']");

                        $( this ).dialog( "close" );
                        alert(server.val() + "\n"+user.val()+"\n"+password.val());
  /*                      if ( bValid ) {
                            $.cookie("server", server.val(), { expires: 9999 });
                            $.cookie("user", user.val(), { expires: 9999 });
                            $.cookie("password", password.val(), { expires: 9999 });
                            alert("Einstellungen gesichert");
                            $( this ).dialog( "close" );
                        }*/
                    }},

                    "Cancel": {
                        "id" : "btn-cancel",
                        "text": "Cancel",
                        "click":function() {
                        $( this ).dialog( "close" );
                    }
                }},
                close: function() {
                    //allFields.val( "" ).removeClass( "ui-state-error" );
                }
            });
            $( "#create-user" )
                    .button()
                    .click(function() {
                        $('#dialogBox').dialog("open");
                    });
        });
    </script></head><body>

<button id="create-user">Create new user</button>
</body></html>